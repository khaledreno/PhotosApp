<!-- Navbar -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<!-- <app-navbar></app-navbar> -->

<nav class="navbar">
  <h1>My Awesome App</h1>
  <div>
    <a href="/home">Home</a>
    <a href="/register">Register</a>
    <a href="http://localhost:8080/logout">Logout</a>
  </div>
</nav>

<h2>Pics</h2>
<div class="pic-container">
  <mat-card *ngFor="let pic of pics" class="pic-card">
    <mat-card-header>
      <mat-card-title>ID: {{ pic.id }}</mat-card-title>
      <mat-card-subtitle>Uploader: {{ pic.uploaderName }}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>
        <span class="label"><strong>Location:</strong></span> {{ pic.location }}
      </p>
      <p><strong>Status:</strong> {{ pic.status }}</p>
      <p><strong>Created At:</strong> {{ pic.createdAt | date: 'medium' }}</p>
      <ng-container *ngIf="isImage(pic.location)">
        <img [src]="getFileUrl(pic.location)" alt="Pic" class="pic-image">
      </ng-container>
      <ng-container *ngIf="!isImage(pic.location)">
        <a [href]="getFileUrl(pic.location)" download>Download File</a>
      </ng-container>
    </mat-card-content>
    <mat-card-actions>
      <div class="button-row">  
        <button mat-raised-button class="approve-button" (click)="approvePic(pic.id)" [disabled]="pic.status === 'APPROVED'">
          <mat-icon>check</mat-icon> Approve
        </button>
        <button mat-raised-button class="decline-button" (click)="declinePic(pic.id)" [disabled]="pic.status === 'DECLINED'">
          <mat-icon>close</mat-icon> Decline
        </button>
      </div>
      <button mat-raised-button class="delete-button" (click)="deletePic(pic.id)">
        <mat-icon>delete</mat-icon> Delete Permanently
      </button>
    </mat-card-actions>
  </mat-card>
</div>



<!-- <h2>Pics</h2>
<div class="pic-container">
  <mat-card *ngFor="let pic of pics" class="pic-card">
    <mat-card-header>
      <mat-card-title>ID: {{ pic.id }}</mat-card-title>
      <mat-card-subtitle>Uploader: {{ pic.uploaderName }}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>
        <span class="label"><strong>Location:</strong></span> {{ pic.location }}
      </p>
      <p><strong>Status:</strong> {{ pic.status }}</p>
      <p><strong>Created At:</strong> {{ pic.createdAt | date: 'medium' }}</p>
      
      <ng-container *ngIf="isImage(pic.location)">
        <img [src]="getFileUrl(pic.location)" 
             alt="Pic" 
             class="pic-image" 
             crossorigin="use-credentials" />
      </ng-container>

      <ng-container *ngIf="!isImage(pic.location)">
        <a [href]="getFileUrl(pic.location)" download>Download File</a>
      </ng-container>
    </mat-card-content>

    <mat-card-actions>
      <div class="button-row">  
        <button mat-raised-button class="approve-button" 
                (click)="approvePic(pic.id)" 
                [disabled]="pic.status === 'APPROVED'">
          <mat-icon>check</mat-icon> Approve
        </button>

        <button mat-raised-button class="decline-button" 
                (click)="declinePic(pic.id)" 
                [disabled]="pic.status === 'DECLINED'">
          <mat-icon>close</mat-icon> Decline
        </button>
      </div>

      <button mat-raised-button class="delete-button" (click)="deletePic(pic.id)">
        <mat-icon>delete</mat-icon> Delete Permanently
      </button>
    </mat-card-actions>
  </mat-card>
</div> -->


<!-- 
<h2>Pics</h2>
<div class="pic-container">
  <mat-card *ngFor="let pic of pics" class="pic-card">
    <mat-card-header>
      <mat-card-title>ID: {{ pic.id }}</mat-card-title>
      <mat-card-subtitle>Uploader: {{ pic.uploaderName }}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>
        <span class="label"><strong>Location:</strong></span> {{ pic.location }}
      </p>
      <p><strong>Status:</strong> {{ pic.status }}</p>
      <p><strong>Created At:</strong> {{ pic.createdAt | date: 'medium' }}</p>
      <ng-container *ngIf="isImage(pic.location)">
        <img [src]="getFileUrl(pic.location)" alt="Pic" class="pic-image">
      </ng-container>
      <ng-container *ngIf="!isImage(pic.location)">
        <a [href]="getFileUrl(pic.location)" download>Download File</a>
      </ng-container>
    </mat-card-content>
    <mat-card-actions>
      <div class="button-row">  
        <button mat-raised-button class="approve-button" (click)="approvePic(pic.id)" [disabled]="pic.status === 'APPROVED'">
          <mat-icon>check</mat-icon> Approve
        </button>
        <button mat-raised-button class="decline-button" (click)="declinePic(pic.id)" [disabled]="pic.status === 'DECLINED'">
          <mat-icon>close</mat-icon> Decline
        </button>
      </div>
      <button mat-raised-button class="delete-button" (click)="deletePic(pic.id)">
        <mat-icon>delete</mat-icon> Delete Permanently
      </button>
    </mat-card-actions>
  </mat-card>
</div>

<button (click)="refreshMethod()">Refreshhhh!!!!</button> -->


<!-- working -->
<!-- Navbar
<nav class="navbar">
  <h1>My Awesome App</h1>
  <div>
    <a href="http://localhost:8080/login">Login</a>
    <a href="/pics">Pics</a>
    <a href="/register">Register</a>
  </div>
</nav>


<h2>Pics</h2>
<div class="pic-container">
  <mat-card *ngFor="let pic of pics" class="pic-card">
    <mat-card-header>
      <mat-card-title>ID: {{ pic.id }}</mat-card-title>
      <mat-card-subtitle>Uploader: {{ pic.uploaderName }}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>
        <span class="label"><strong>Location:</strong></span> {{ pic.location }}
      </p>
      <p><strong>Status:</strong> {{ pic.status }}</p>
      <p><strong>Created At:</strong> {{ pic.createdAt | date: 'medium' }}</p>
      <ng-container *ngIf="isImage(pic.location)">
        <img [src]="getFileUrl(pic.location)" alt="Pic" class="pic-image">
      </ng-container>
      <ng-container *ngIf="!isImage(pic.location)">
        <a [href]="getFileUrl(pic.location)" download>Download File</a>
      </ng-container>
    </mat-card-content>
    <mat-card-actions>
      <div class="button-row">  
        <button mat-raised-button class="approve-button" (click)="approvePic(pic.id)" [disabled]="pic.status === 'APPROVED'">
          <mat-icon>check</mat-icon> Approve
        </button>
        <button mat-raised-button class="decline-button" (click)="declinePic(pic.id)" [disabled]="pic.status === 'DECLINED'">
          <mat-icon>close</mat-icon> Decline
        </button>
      </div>
      <button mat-raised-button class="delete-button" (click)="deletePic(pic.id)">
        <mat-icon>delete</mat-icon> Delete Permanently
      </button>
    </mat-card-actions>
  </mat-card>
</div>

 -->


<!-- <h2>Pics</h2>
<div class="pic-container">
  <mat-card *ngFor="let pic of pics" class="pic-card">
    <mat-card-header>
      <mat-card-title>ID: {{ pic.id }}</mat-card-title>
      <mat-card-subtitle>Uploader: {{ pic.uploaderName }}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p><strong>Location:</strong> {{ pic.location }}</p>
      <p><strong>Status:</strong> {{ pic.status }}</p>
      <p><strong>Created At:</strong> {{ pic.createdAt }}</p>
      <ng-container *ngIf="isImage(pic.location)">
        <img [src]="getFileUrl(pic.location)" alt="Pic" class="pic-image">
      </ng-container>
      <ng-container *ngIf="!isImage(pic.location)">
        <a [href]="getFileUrl(pic.location)" download>Download File</a>
      </ng-container>
    </mat-card-content>
    <mat-card-actions>
        <button mat-raised-button class="approve-button" (click)="approvePic(pic.id)">
          <mat-icon>check</mat-icon> Approve
        </button>
        <button mat-raised-button class="decline-button" (click)="declinePic(pic.id)">
          <mat-icon>close</mat-icon> Decline
        </button>
      </mat-card-actions>
  </mat-card> 
</div>-->

<!-- <h2>Picture List</h2>

<div *ngIf="pics.length > 0; else noPics">
  <mat-card *ngFor="let pic of pics" class="pic-card">
    <div class="pic-header">
      <h3>ID: {{ pic.id }}</h3>
      <p><strong>Uploader:</strong> {{ pic.uploader }}</p>
      <p><strong>Location:</strong> {{ pic.location }}</p>
      <p><strong>Status:</strong> {{ pic.status }}</p>
      <p><strong>Created At:</strong> {{ pic.createdAt | date: 'medium' }}</p>
    </div>

    <img *ngIf="pic.location" [src]="pic.location" alt="{{ pic.uploader }}" class="pic-image" />

    <div class="button-container">
      <button mat-button color="primary" (click)="approvePic(pic.id)" [disabled]="pic.status === 'APPROVED'" class="approve-button">
        Approve
      </button>
      <button mat-button color="warn" (click)="declinePic(pic.id)" [disabled]="pic.status === 'DECLINED'" class="decline-button">
        Decline
      </button>
    </div>
  </mat-card>
</div>

<ng-template #noPics>
  <p>No pictures found.</p>
</ng-template> -->